@tailwind base;
@tailwind components;
@tailwind utilities;

/* Self-hosted Inter variable font */
@layer base {
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: url('../fonts/InterVariable.woff2') format('woff2');
  }
  @font-face {
    font-family: 'Inter';
    font-style: italic;
    font-weight: 100 900;
    font-display: swap;
    src: url('../fonts/InterVariable-Italic.woff2') format('woff2');
  }
}

/* =========================================================
   Design Tokens (Light/Dark via .dark auf <html> oder <body>)
   ========================================================= */
@layer base {
  :root {
    --bg:        255 255 255;        /* #FFFFFF */
    --bg-muted:  245 245 245;        /* helles Grau */
    --card:      255 255 255;
    --line:      220 223 226;        /* neutrales Grau */
    --text:      20 29 40;           /* dunkles Blau-Grau */
    --text-2:    88 96 104;          /* softer Sekundärtext */
    --accent:    31 45 52;           /* #1F2D34 primary */
    --accent-2:  0 0 0;              /* Schwarz als Tiefe */
    --success:   16 185 129;         /* emerald-500 */
    --warning:   245 158 11;         /* amber-500 */
    --danger:    239 68 68;          /* red-500 */
    --ring:      172 171 170;        /* #ACABAA secondary */
    --shadow:    20 29 40;           /* tiefer Schatten */
    --radius:    14px;
  }

  .dark {
    --bg:        5 8 12;             /* fast Schwarz */
    --bg-muted:  15 17 20;
    --card:      15 17 20;
    --line:      60 65 70;
    --text:      235 237 240;
    --text-2:    180 185 191;
    --accent:    31 45 52;           /* primary bleibt */
    --accent-2:  172 171 170;        /* secondary */
    --success:   34 197 94;          /* green-500 */
    --warning:   245 158 11;
    --danger:    248 113 113;        /* red-400 */
    --ring:      172 171 170;        /* secondary */
    --shadow:    5 8 12;             /* sehr dunkel */
  }

  html, body {
    @apply antialiased;
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    color: rgb(var(--text));
    background-color: rgb(var(--bg));
    accent-color: rgb(var(--accent));
    text-rendering: optimizeLegibility;
  }

  /* Typografie */
  h1, .h1 { @apply text-3xl md:text-5xl font-semibold tracking-tight; }
  h2, .h2 { @apply text-2xl md:text-4xl font-semibold tracking-tight; }
  h3, .h3 { @apply text-xl md:text-2xl font-semibold; }
  p       { @apply text-base leading-7 text-slate-600 dark:text-slate-400; }

  /* Links */
  a {
    color: rgb(var(--accent));
    text-underline-offset: 2px;
  }
  a:hover { text-decoration: underline; }

  /* Fokus-Styles */
  :focus-visible {
    outline: 2px solid rgb(var(--ring));
    outline-offset: 2px;
    border-radius: 10px;
  }
}

/* ====================================
   Komponenten (auf Tailwind aufgebaut)
   ==================================== */
@layer components {
  /* Container & Sektionen */
  .container-prose { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }
  .section        { @apply py-14 md:py-20; }
  .section-muted  { background-color: rgb(var(--bg-muted)); }
  .dark .section-muted { background-color: rgb(var(--bg-muted)); }

  /* Karten */
  .card {
    background-color: rgb(var(--card));
    border: 1px solid rgb(var(--line) / 0.5);
    border-radius: var(--radius);
    box-shadow: 0 10px 30px -12px rgb(var(--shadow) / 0.35);
    @apply p-6;
  }
  .card-hover { @apply transition-transform hover:-translate-y-0.5 hover:shadow-xl; }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium rounded-xl transition
           disabled:opacity-50 disabled:cursor-not-allowed;
    box-shadow: 0 8px 24px -12px rgb(var(--shadow) / 0.35);
  }
  .btn-primary {
    color: white;
    background: linear-gradient(135deg, rgb(var(--accent)) 0%, rgb(var(--accent-2)) 100%);
  }
  .btn-primary:hover { filter: brightness(1.05); }
  .btn-secondary {
    color: rgb(var(--text));
    background-color: rgb(var(--bg-muted));
    border: 1px solid rgb(var(--line) / 0.6);
  }
  .btn-secondary:hover { @apply bg-slate-100 dark:bg-slate-800; }
  .btn-ghost {
    background-color: transparent;
    color: rgb(var(--text));
  }
  .btn-ghost:hover { background-color: rgb(var(--bg-muted)); }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium;
    background-color: rgb(var(--bg-muted));
    border: 1px solid rgb(var(--line) / 0.6);
    color: rgb(var(--text-2));
  }
  .badge-success { background-color: rgb(var(--success) / 0.12); color: rgb(var(--success)); border-color: transparent; }
  .badge-warning { background-color: rgb(var(--warning) / 0.12); color: rgb(var(--warning)); border-color: transparent; }
  .badge-danger  { background-color: rgb(var(--danger)  / 0.12); color: rgb(var(--danger));  border-color: transparent; }

  /* Formularkomponenten */
  .input, .textarea, .select {
    @apply w-full rounded-xl border bg-transparent px-3 py-2 text-sm
           placeholder:text-slate-400 dark:placeholder:text-slate-500
           outline-none transition;
    border-color: rgb(var(--line) / 0.7);
    color: rgb(var(--text));
  }
  .input:focus, .textarea:focus, .select:focus {
    box-shadow: 0 0 0 4px rgb(var(--ring) / 0.35);
    border-color: rgb(var(--ring));
  }
  .textarea { @apply min-h-[120px] resize-y; }

  /* Navbar */
  .navbar {
    @apply sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-stone-900/50
           border-b;
    border-color: rgb(var(--line) / 0.6);
  }
  .navbar-inner { @apply container-prose flex items-center justify-between h-16; }
  .nav-link {
    @apply text-sm font-medium text-slate-600 dark:text-slate-300 hover:text-stone-900 dark:hover:text-white transition;
  }

  /* Hero */
  .hero {
    position: relative;
    overflow: hidden;
    background:
      radial-gradient(800px 400px at 10% -10%, rgb(var(--accent) / 0.15), transparent 60%),
      radial-gradient(600px 300px at 110% 10%, rgb(var(--accent-2) / 0.12), transparent 60%);
  }
  .hero-inner { @apply container-prose py-20 md:py-28; }
  .hero-title {
    @apply text-4xl md:text-6xl font-semibold tracking-tight text-stone-900 dark:text-white;
    letter-spacing: -0.02em;
  }
  .hero-subtitle { @apply mt-4 max-w-2xl text-lg md:text-xl text-slate-600 dark:text-slate-400; }
  .hero-cta { @apply mt-8 flex gap-3; }

  /* Footer */
  .site-footer {
    @apply border-t;
    border-color: rgb(var(--line) / 0.6);
  }
  .site-footer-inner { @apply container-prose py-8 text-sm text-slate-500 dark:text-slate-400; }
}

/* =============================
   FIX: Lightmode Textkontraste
   ============================= */
@layer base {
  /* Stelle sicher, dass Text im Lightmode dunkel ist */
  body, html {
    color: rgb(var(--text));
    background-color: rgb(var(--bg));
  }

  /* Überschreibe alle Textfarben, die versehentlich weiß bleiben */
  .text-white:not(.dark *) {
    color: rgb(var(--text)) !important;
  }

  /* Footer fix */
  .site-footer-inner {
    color: rgb(var(--text-2));
  }

  /* Cards und Sektionen */
  .card, .section-muted {
    color: rgb(var(--text));
    background-color: rgb(var(--card));
  }
}

/* Optional: bessere Lesbarkeit im hellen Modus bei starken Verläufen */
@media (prefers-color-scheme: light) {
  .hero-title, h1, h2, h3 {
    color: rgb(var(--text)) !important;
  }
  p, .hero-subtitle {
    color: rgb(var(--text-2)) !important;
  }
}


/* =========================
   Utilities & Micro-Details
   ========================= */
@layer utilities {
  .elevate  { box-shadow: 0 16px 40px -20px rgb(var(--shadow) / 0.45); }
  .glass    { background: linear-gradient( to bottom right, rgb(255 255 255 / 0.5), rgb(255 255 255 / 0.2) );
              border: 1px solid rgb(var(--line) / 0.35); @apply dark:bg-white/5; }

  /* Sanfte Hover-Skala für Karten/Buttons */
  .hover-lift { @apply transition-transform will-change-transform hover:-translate-y-0.5; }

  /* Dezente Dividerfarbe */
  .divider { border-color: rgb(var(--line) / 0.6); }

  /* Animations */
  @keyframes float { 0%,100%{ transform: translateY(0) } 50% { transform: translateY(-6px) } }
  .float { animation: float 6s ease-in-out infinite; }

  @keyframes pulse-soft { 0%,100%{ opacity: 1 } 50% { opacity: .6 } }
  .pulse-soft { animation: pulse-soft 2.6s ease-in-out infinite; }
}

/* =========================================
   Optional: Reduzierte Bewegung berücksicht.
   ========================================= */
@media (prefers-reduced-motion: reduce) {
  .hover-lift, .card-hover, .float, .pulse-soft { transition: none !important; animation: none !important; }
}

/* =========================
   Kleine Defaults beibehalten
   ========================= */
body {
  /* Falls dein altes CSS diesen Selector nutzt */
  font-family: Inter, sans-serif;
}
